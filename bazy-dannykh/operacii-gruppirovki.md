# –û–ø–µ—Ä–∞—Ü–∏–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

–û–ø–µ—Ä–∞—Ü–∏–∏ **–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏** –≤ SQL –Ω—É–∂–Ω—ã –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ–±—ä–µ–¥–∏–Ω—è—Ç—å —Å—Ç—Ä–æ–∫–∏ –ø–æ –∫–∞–∫–æ–º—É-—Ç–æ –ø—Ä–∏–∑–Ω–∞–∫—É –∏ —É–∂–µ –∫ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏.

***

#### üìå –û—Å–Ω–æ–≤–Ω–æ–µ ‚Äî `GROUP BY`

*   –°–∏–Ω—Ç–∞–∫—Å–∏—Å:

    ```sql
    SELECT –∫–æ–ª–æ–Ω–∫–∞_–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏, –∞–≥—Ä–µ–≥–∞—Ç–Ω–∞—è_—Ñ—É–Ω–∫—Ü–∏—è(...)
    FROM —Ç–∞–±–ª–∏—Ü–∞
    GROUP BY –∫–æ–ª–æ–Ω–∫–∞_–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏;
    ```
*   –ü—Ä–∏–º–µ—Ä: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –ø–æ –∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É:

    ```sql
    SELECT customer_id, COUNT(*) AS order_count
    FROM orders
    GROUP BY customer_id;
    ```

***

#### üìå –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ª–æ–Ω–æ–∫

–ú–æ–∂–Ω–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º:

```sql
SELECT department, job_title, AVG(salary) AS avg_salary
FROM employees
GROUP BY department, job_title;
```

‚Üí –°—Ä–µ–¥–Ω—è—è –∑–∞—Ä–ø–ª–∞—Ç–∞ –≤ —Ä–∞–∑—Ä–µ–∑–µ "–æ—Ç–¥–µ–ª + –¥–æ–ª–∂–Ω–æ—Å—Ç—å".

***

#### üìå `HAVING` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≥—Ä—É–ø–ø

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ—Å–ª–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç `WHERE`, –∫–æ—Ç–æ—Ä–æ–µ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ –¥–æ –Ω–µ—ë):

```sql
SELECT department, COUNT(*) AS emp_count
FROM employees
GROUP BY department
HAVING COUNT(*) > 5;
```

‚Üí –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ –æ—Ç–¥–µ–ª—ã, –≥–¥–µ –±–æ–ª—å—à–µ 5 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.

***

#### üìå –ò—Ç–æ–≥–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

1. **–ü–æ –æ–¥–Ω–æ–º—É –ø–æ–ª—é** ‚Äì –≥—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –æ–¥–Ω–æ–º—É –ø—Ä–∏–∑–Ω–∞–∫—É.
2. **–ü–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º** ‚Äì —Å–æ–∑–¥–∞—ë–º –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã.
3. **–° –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞–º–∏** ‚Äì –º–æ–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å, –ø–æ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ –≤–Ω–µ—à–Ω–µ–º –∑–∞–ø—Ä–æ—Å–µ.
4. **–° HAVING** ‚Äì —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–º–µ–Ω–Ω–æ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

***

üîë **–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π**:

* **–ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** –¥–∞—é—Ç –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫.
* **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** —Ä–∞–∑–±–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≥—Ä—É–ø–ø—ã, –∫ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∞–≥—Ä–µ–≥–∞—Ç—ã.
