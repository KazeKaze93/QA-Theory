# Как происходит деплой программ IOS/AOS?

Процесс деплоя (публикации) приложений для **Android (AOS)** и **iOS** различается из-за разных экосистем, правил и инструментов, но в обоих случаях включает одинаковые стадии: сборку, подпись, тестирование и загрузку в официальный стор.

***

### **1. Деплой Android-приложений (AOS)**

#### **Основные этапы:**

**a) Сборка**

* Генерируется **`.apk`** (или **`.aab` — Android App Bundle**).
*   Используется **Gradle**:

    ```bash
    ./gradlew assembleRelease
    ```
* В production обязателен **release build** с отключённым дебагом и shrink-оптимизацией.

**b) Подпись приложения**

*   Приложение подписывается **release-ключом** (`keystore`):

    ```bash
    jarsigner -keystore my-key.jks app-release.apk alias_name
    ```
* Без подписи Android не позволит установить приложение.

**c) Загрузка**

* Через **Google Play Console**:
  * Создаётся карточка приложения.
  * Загружается `.aab` (предпочтительно) или `.apk`.
  * Указываются описание, иконки, скриншоты, политики конфиденциальности.
  * Настраиваются **тестовые треки** (Internal, Closed, Open).

**d) Проверка и публикация**

* Проходит **автоматическую и ручную модерацию Google**.
* После одобрения появляется в Play Store (в течение нескольких часов/дней).

**e) Альтернативы**

* Внутреннее распространение через:
  * **Firebase App Distribution**,
  * **AppCenter**,
  * Прямую ссылку (внутренние `.apk` файлы, MDM системы).

***

### **2. Деплой iOS-приложений**

#### **Основные этапы:**

**a) Сборка**

* Создаётся **`.ipa`** (iOS App Archive).
* Инструменты:
  * **Xcode**,
  * либо CI/CD (например, Fastlane, Bitrise, Jenkins).

**b) Подпись и профили**

* Обязательна **цифровая подпись** и **профиль провиженинга**:
  * **Provisioning Profile** — разрешает установку приложения на конкретные устройства.
  * **Certificates** — идентифицируют разработчика или организацию.
  * Всё управляется через **Apple Developer Account**.

**c) Тестирование**

* Через **TestFlight**:
  * Загрузка `.ipa` в App Store Connect.
  * Рассылка приглашений тестировщикам (до 10 000).
  * Проверка функционала, производительности, UX.

**d) Публикация**

* После тестирования — отправка на ревью Apple.
* Apple проводит ручную модерацию (1–3 дня).
* После одобрения приложение доступно в **App Store**.

**e) Внутренние варианты деплоя**

* **Ad Hoc** — установка на ограниченный список устройств (по UDID).
* **Enterprise Distribution** — для корпоративных приложений без App Store.
* **TestFlight** — для бета-версий.

***

### **3. Сравнение AOS и iOS деплоя**

| Этап                  | Android (AOS)           | iOS                              |
| --------------------- | ----------------------- | -------------------------------- |
| Формат сборки         | `.apk`, `.aab`          | `.ipa`                           |
| Среда сборки          | Gradle / Android Studio | Xcode                            |
| Подпись               | Keystore                | Certificates + Provision Profile |
| Тестирование          | Firebase / Play tracks  | TestFlight                       |
| Магазин               | Google Play Console     | App Store Connect                |
| Проверка              | Автоматическая          | Ручная                           |
| Альтернативный деплой | Ссылки, MDM, AppCenter  | Ad Hoc, Enterprise, TestFlight   |

***

Итог:

* **Android**: деплой проще и быстрее, автоматическая модерация, основа — `.aab` через Play Console.
* **iOS**: процесс строже, требует сертификатов, профилей, проверки Apple, но предоставляет TestFlight для безопасного тестирования перед релизом.
