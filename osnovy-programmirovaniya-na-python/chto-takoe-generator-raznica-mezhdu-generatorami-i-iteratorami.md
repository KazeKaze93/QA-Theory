# –ß—Ç–æ —Ç–∞–∫–æ–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä? –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞–º–∏?

### **1. –ò—Ç–µ—Ä–∞—Ç–æ—Ä**

* –ò—Ç–µ—Ä–∞—Ç–æ—Ä ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π **–ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** (—Å–ø–∏—Å–æ–∫, —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ä—Ç–µ–∂) **–æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç –∑–∞ —Ä–∞–∑**.
* –ò—Ç–µ—Ä–∞—Ç–æ—Ä —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥—ã:
  * `__iter__()` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∞–º –æ–±—ä–µ–∫—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞
  * `__next__()` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç, –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫–æ–Ω—Ü–∞ –≤—ã–¥–∞—ë—Ç `StopIteration`

#### **–ü—Ä–∏–º–µ—Ä –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞**

```python
lst = [1, 2, 3]
it = iter(lst)

print(next(it))  # 1
print(next(it))  # 2
print(next(it))  # 3
# print(next(it))  # StopIteration
```

***

### **2. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä**

* –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä ‚Äî —ç—Ç–æ **—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä**, –∫–æ—Ç–æ—Ä—ã–π **—Å–æ–∑–¥–∞—ë—Ç —ç–ª–µ–º–µ–Ω—Ç—ã "–Ω–∞ –ª–µ—Ç—É"** –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.
* –≠–∫–æ–Ω–æ–º–∏—Ç –ø–∞–º—è—Ç—å, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π.
* –°–æ–∑–¥–∞—ë—Ç—Å—è —Å –ø–æ–º–æ—â—å—é:
  1. **–§—É–Ω–∫—Ü–∏–π —Å `yield`**
  2. **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π** (`(...)` –≤–º–µ—Å—Ç–æ `[...]`)

#### **2.1 –§—É–Ω–∫—Ü–∏—è-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä**

```python
def my_gen(n):
    for i in range(n):
        yield i  # –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ –æ–¥–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É –∑–∞ —Ä–∞–∑

gen = my_gen(5)
for val in gen:
    print(val)
```

**–í—ã–≤–æ–¥:**

```
0
1
2
3
4
```

#### **2.2 –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ**

```python
gen_exp = (x**2 for x in range(5))
print(next(gen_exp))  # 0
print(next(gen_exp))  # 1
```

***

### **3. –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º –∏ –æ–±—ã—á–Ω—ã–º –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–º**

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞       | –ò—Ç–µ—Ä–∞—Ç–æ—Ä                    | –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä                                      |
| -------------------- | --------------------------- | ---------------------------------------------- |
| –°–æ–∑–¥–∞–Ω–∏–µ             | –ß–µ—Ä–µ–∑ `iter()`              | –§—É–Ω–∫—Ü–∏—è —Å `yield` –∏–ª–∏ `(x for x in ...)`       |
| –ü–∞–º—è—Ç—å               | –≠–ª–µ–º–µ–Ω—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é | –≠–ª–µ–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–æ –º–µ—Ä–µ –∑–∞–ø—Ä–æ—Å–∞             |
| –ö–ª—é—á–µ–≤–æ–π –º–µ—Ç–æ–¥       | `__next__()`                | `__next__()` (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)        |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ        | –õ—é–±–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å    | –ë–æ–ª—å—à–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ª–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è |
| –ú–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å | –î–∞ (—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä) | –ù–µ—Ç, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ–¥–∏–Ω —Ä–∞–∑ –∏—Å—á–µ—Ä–ø—ã–≤–∞–µ—Ç—Å—è          |

***

### **4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –∞–≤—Ç–æ—Ç–µ—Å—Ç–∞—Ö**

* **–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –ª–æ–≥–æ–≤ –∏–ª–∏ API-–¥–∞–Ω–Ω—ã—Ö** –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ–≥–æ –≤ –ø–∞–º—è—Ç—å.
* **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –Ω–∞ –ª–µ—Ç—É:

```python
def test_data(n):
    for i in range(n):
        yield {"username": f"user{i}", "password": "123"}
```

* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ **pytest —Å `@pytest.mark.parametrize`**, –∫–æ–≥–¥–∞ –º–Ω–æ–≥–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –¥–∞–Ω–Ω—ã—Ö.

***

üí° **–í—ã–≤–æ–¥:**

* –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä = –ª–µ–Ω–∏–≤—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä, —ç–∫–æ–Ω–æ–º–∏—Ç –ø–∞–º—è—Ç—å.
* –ò—Ç–µ—Ä–∞—Ç–æ—Ä = –æ–±—ä–µ–∫—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –º–æ–∂–Ω–æ –ø—Ä–æ–π—Ç–∏—Å—å —Å `next()`.

***

<details>

<summary>–û—Ç–ª–∏—á–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ –æ—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π</summary>

–í Python –µ—Å—Ç—å **–¥–≤–∞ –ø–æ—Ö–æ–∂–∏—Ö, –Ω–æ —Ä–∞–∑–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–∞**:

* **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã** (generator functions) ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ —Å `yield`, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä.
* **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è** (generator expressions) ‚Äî —ç—Ç–æ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –ø–æ—Ö–æ–∂–∏–π –Ω–∞ list comprehension, –Ω–æ –≤ –∫—Ä—É–≥–ª—ã—Ö —Å–∫–æ–±–∫–∞—Ö.

***

### 1. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã (generator functions)

**–ö–∞–∫ —Å–æ–∑–¥–∞—é—Ç—Å—è:**\
–ò—Å–ø–æ–ª—å–∑—É–µ–º `def` –∏ `yield` –≤–º–µ—Å—Ç–æ `return`.

```python
def my_gen():
    yield 1
    yield 2
    yield 3

g = my_gen()
print(next(g))  # 1
print(next(g))  # 2
print(next(g))  # 3
```

üìå **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* `yield` –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –ø–æ–∑–∏—Ü–∏—é).
* –ú–æ–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É, —É—Å–ª–æ–≤–∏—è, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã.
* –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö `yield`, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç return, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≤–µ—Ä—à–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

***

### 2. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è (generator expressions)

**–ö–∞–∫ —Å–æ–∑–¥–∞—é—Ç—Å—è:**\
–ü–æ—Ö–æ–∂–∏ –Ω–∞ list comprehension, –Ω–æ —Å `()` –≤–º–µ—Å—Ç–æ `[]`.

```python
g = (x**2 for x in range(5))

print(next(g))  # 0
print(next(g))  # 1
print(next(g))  # 4
```

üìå **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –≠—Ç–æ –∫–æ—Ä–æ—Ç–∫–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –∫–æ–≥–¥–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ—Å—Ç–∞—è.
* –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–∞—â–µ –¥–ª—è "–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ" —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö.
* –ù–µ–ª—å–∑—è –Ω–∞–ø–∏—Å–∞—Ç—å —Å–ª–æ–∂–Ω—ã–π –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π –∫–æ–¥ (—Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ).

***

### 3. –û—Ç–ª–∏—á–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ

| –ö—Ä–∏—Ç–µ—Ä–∏–π             | –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã (yield)                      | –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è                    |
| -------------------- | --------------------------------------- | ----------------------------------------- |
| **–°–æ–∑–¥–∞–Ω–∏–µ**         | –ß–µ—Ä–µ–∑ `def` –∏ `yield`                   | –ß–µ—Ä–µ–∑ –∫—Ä—É–≥–ª—ã–µ —Å–∫–æ–±–∫–∏ `()`                 |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å –ª–æ–≥–∏–∫–∏** | –ú–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã, —É—Å–ª–æ–≤–∏—è | –¢–æ–ª—å–∫–æ –æ–¥–Ω–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ                     |
| **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**       | –ë–æ–ª–µ–µ –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã                       | –ö–æ—Ä–æ—Ç–∫–∏–µ –∏ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ                     |
| **–ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–æ—Å—Ç—å**  | –î–∞                                      | –ù–µ—Ç                                       |
| **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** | –ö–æ–≥–¥–∞ –ª–æ–≥–∏–∫–∞ —Å–ª–æ–∂–Ω–∞—è, –µ—Å—Ç—å –º–Ω–æ–≥–æ —à–∞–≥–æ–≤  | –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∏ –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ—Ç–æ–∫ |
| **–ü—Ä–∏–º–µ—Ä**           | `def my_gen(): yield x`                 | `(x for x in range(10))`                  |

***

### 4. –û–±—â–∏–µ —á–µ—Ä—Ç—ã

* –û–±–∞ **–ª–µ–Ω–∏–≤—ã–µ** ‚Äî –Ω–µ —Å–æ–∑–¥–∞—é—Ç –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ —Å—Ä–∞–∑—É, –∞ –≤—ã–¥–∞—é—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É.
* –û–±–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç **–∏—Ç–µ—Ä–∞—Ç–æ—Ä**.
* –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `for`, `sum`, `max`, `list()` –∏ —Ç. –ø.

***

### 5. –ö–æ–≥–¥–∞ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

* **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä (yield)** ‚Äî –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ, —Å–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è, –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫ `yield`.
* **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ** ‚Äî –µ—Å–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–µ –∏ –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ—á–∫—É



</details>
